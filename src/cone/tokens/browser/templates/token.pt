<tal:block
  xmlns:tal="http://xml.zope.org/namespaces/tal"
  xmlns:ajax="http://namespaces.conestack.org/ajax"
  omit-tag="True">

  <tal:contextmenu replace="structure tile('contextmenu')" />

  <div class="flex-group">
  <div class="panel panel-default token">
    <ul class="list-group">
      <li class="list-group-item">
        <button type="button"
                class="btn ${context.cssclass}">
          <span class="glyphicon glyphicon-off"></span>
          <span tal:content="context.active_label">
            Active
          </span>
        </button>
      </li>
      <li class="list-group-item flex-group">
        <div>
          <strong>Valid:</strong>
          <span tal:content="model.attrs['valid_from'].strftime('%d.%m.%Y, %H:%M:%S')"></span>
          <strong> - </strong>
          <span tal:content="model.attrs['valid_to'].strftime('%d.%m.%Y, %H:%M:%S')"></span>
        </div>
        <div class="btn-group">
          <button class="btn btn-default"
            ajax:bind="click"
            ajax:target="${context.nodeurl}?duration=unlimited"
            ajax:action="add_duration">
            Unlimited
          </button>
          <button class="btn btn-default"
            ajax:bind="click"
            ajax:target="${context.nodeurl}?duration=morning"
            ajax:action="add_duration">
            Morning
          </button>
          <button class="btn btn-default"
            ajax:bind="click"
            ajax:target="${context.nodeurl}?duration=afternoon"
            ajax:action="add_duration">
            Afternoon
          </button>
          <button class="btn btn-default"
            ajax:bind="click"
            ajax:target="${context.nodeurl}?duration=day"
            ajax:action="add_duration">
            Today
          </button>
          <button class="btn btn-default"
            ajax:bind="click"
            ajax:target="${context.nodeurl}?duration=week"
            ajax:action="add_duration">
            This Week
          </button>
          <button class="btn btn-default"
            ajax:bind="click"
            ajax:target="${context.nodeurl}?duration=week"
            ajax:action="add_duration">
            This Month
          </button>
        </div>
      </li>
      <li class="list-group-item flex-group">
        <div>
          <strong>Usage Count:</strong>
          <span tal:condition="model.attrs['usage_count'] > -1"
                tal:content="model.attrs['usage_count']">
            Usage Count
          </span>
          <span tal:condition="model.attrs['usage_count'] == -1">
            Unlimited
          </span>
        </div>
        <div class="btn-group">
          <button class="btn btn-default"
            ajax:bind="click"
            ajax:target="${context.nodeurl}?amount=-1"
            ajax:action="add_use">
            Unlimited
          </button>
          <button class="btn btn-default"
            ajax:bind="click"
            ajax:target="${context.nodeurl}?amount=1"
            ajax:action="add_use">
            1
          </button>
          <button class="btn btn-default"
            ajax:bind="click"
            ajax:target="${context.nodeurl}?amount=10"
            ajax:action="add_use">
            10
          </button>
          <button class="btn btn-default"
            ajax:bind="click"
            ajax:target="${context.nodeurl}?amount=20"
            ajax:action="add_use">
            20
          </button>
          <button class="btn btn-default"
            ajax:bind="click"
            ajax:target="${context.nodeurl}?amount=50"
            ajax:action="add_use">
            50
          </button>
          <button class="btn btn-default"
            ajax:bind="click"
            ajax:target="${context.nodeurl}?amount=100"
            ajax:action="add_use">
            100
          </button>
        </div>
      </li>
      <li class="list-group-item">
        <strong>Lock Time:</strong>
        <span tal:content="context.lock_time_seconds"></span>
      </li>
      <li class="list-group-item">
          <strong>Creator:</strong>
          <span tal:content="model.attrs['creator']"></span>
      </li>
      <li class="list-group-item">
          <strong>Created:</strong>
          <span tal:content="model.attrs['created'].strftime('%d.%m.%Y, %H:%M:%S')"></span>
      </li>
      <li class="list-group-item">
          <strong>Modified:</strong>
          <span tal:content="model.attrs['modified'].strftime('%d.%m.%Y, %H:%M:%S')"></span>
      </li>
    </ul>
  </div>
    <div class="panel panel-default QR" tal:condition="context.stream_qrcode_token">
      <strong>QR CODE:</strong>
      <div class="stream_image">
        <object data="${context.stream_qrcode_token}"
                type="image/png"
                height="256px"
                width="256px" />
      </div>
    </div>
  </div>
</tal:block>